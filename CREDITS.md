# 致谢与项目关系

## 基于项目

本项目基于 **[ling-drag0n/api-pool](https://github.com/ling-drag0n/api-pool)** 开发。

原项目地址：https://github.com/ling-drag0n/api-pool

## 项目关系

- **原项目**：OpenAI API 密钥管理池系统（单池）
- **本项目**：Gemini API 多池隔离管理系统（多池）

### 原项目已有的核心功能

原项目是一个功能完整的 OpenAI API 密钥管理系统，已包含以下核心功能：

- ✅ OpenAI API 格式转发和代理
- ✅ KV 存储和 D1 数据库双存储支持
- ✅ 批量添加、删除、启用、禁用 API 密钥
- ✅ 智能负载均衡（智能轮询选择算法）
- ✅ 高级流式处理（SSE、自适应延迟算法）
- ✅ 实时统计与监控（RPM、RPD、TPM、TPD）
- ✅ 安全特性（密码保护、JWT 认证、密钥混淆显示）
- ✅ 自动检测令牌余额和状态
- ✅ 失败重试和自动禁用机制
- ✅ 管理界面和监控仪表盘

---

## 本项目的主要改进

### 1. **API 平台转换**（核心改进）
- ✅ 从 OpenAI API 适配到 Google Gemini API
- ✅ OpenAI 格式 ↔ Gemini 格式自动转换
- ✅ Gemini 特有参数和响应格式支持
- ✅ Gemini 流式响应完整适配

### 2. **多池隔离架构**（新增功能）
- ✅ 从单池管理改为多池隔离架构
- ✅ 每个池独立的 Auth Key（`sk-pool-xxxx` 格式）
- ✅ 池级别的 Gemini Keys 管理
- ✅ 池级别的统计数据追踪
- ✅ 池级别的模型访问控制

### 3. **动态模型管理**（新增功能）
- ✅ 自动从 Gemini API 获取模型列表
- ✅ 模型列表缓存机制（1小时）
- ✅ 每个池可限制允许使用的模型
- ✅ 模型自动更新和验证

### 4. **批量操作 UI 增强**（优化）
- ✅ 新增复选框批量选择界面（原项目无）
- ✅ 新增批量复制功能（格式化输出）
- ✅ 全选/取消全选功能
- ✅ 选中状态可视化高亮
- ✅ 智能批量操作按钮（自动切换文本）

### 5. **D1 自动初始化**（优化）
- ✅ 使用 `batch()` 方式自动初始化表
- ✅ 首次运行自动创建所有表和索引
- ✅ 无需手动执行 SQL 脚本（原项目需要）

### 6. **代码组织改进**（新增）
- ✅ 模块化代码结构（`src/` 文件夹）
- ✅ 独立的构建脚本（`merge-kv.js` / `merge-d1.js`）
- ✅ 完全分离的 KV 和 D1 版本
- ✅ 配置文件模板（`wrangler-*.toml.example`）
- ✅ .gitignore 保护敏感信息

### 7. **Gemini 专用文档**（新增）
- ✅ 针对 Gemini API 的完整部署文档
- ✅ 5分钟快速开始指南
- ✅ 功能独立说明文档（STATS_DASHBOARD.md、BATCH_IMPORT.md、DYNAMIC_MODELS.md等）
- ✅ 完整的项目导航（INDEX.md）
- ✅ 致谢文档（CREDITS.md）

### 8. **错误处理优化**（优化）
- ✅ 详细的错误信息序列化（避免 [object Object]）
- ✅ D1 操作错误正确抛出（原项目返回 false）
- ✅ 完整的日志追踪

---

## 技术栈对比

### 继承自原项目
- ✅ Cloudflare Workers 运行环境
- ✅ Cloudflare KV 存储支持
- ✅ Cloudflare D1 数据库支持
- ✅ 智能负载均衡算法
- ✅ SSE 流式处理
- ✅ 实时统计系统（RPM/RPD/TPM/TPD）
- ✅ JWT 认证机制
- ✅ Web 管理界面

### 本项目新增
- ✅ Google Gemini API 集成（替代 OpenAI API）
- ✅ 多池隔离架构（原为单池）
- ✅ 动态模型获取和管理
- ✅ 模块化代码组织（src/ 文件夹）
- ✅ 独立构建系统（分离 KV 和 D1）
- ✅ D1 batch 初始化（原需手动 SQL）
- ✅ 批量操作复选框 UI
- ✅ Gemini 专用文档体系

---

## 感谢原作者

特别感谢 **[@ling-drag0n](https://github.com/ling-drag0n)** 创建的优秀项目！

原项目为本项目提供了：
- 优秀的多池隔离架构设计
- 完整的 Worker 开发实践
- 负载均衡算法实现
- Web 管理界面基础
- 清晰的代码组织结构

这些为我们的 Gemini API 适配工作提供了坚实的基础。

---

## 开源精神

我们遵循开源社区的精神：
- 尊重原作者的工作成果
- 清晰标注项目来源和关系
- 分享改进和新增功能
- 回馈社区

如果您发现任何问题或有改进建议，欢迎提交 issue 或 pull request！

---

## 许可说明

本项目基于原项目许可开源。

**请注意**：
- 使用本项目时，请同时遵守原项目的许可协议
- 在衍生项目中，请保留对原作者的致谢
- 推荐标注项目的完整来源链接

---

**原项目**：https://github.com/ling-drag0n/api-pool  
**本项目**：[您的项目地址]

感谢所有为开源社区做出贡献的开发者！🎉
